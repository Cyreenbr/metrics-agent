# Configuration pour tester avec Pushgateway
# Remplacez config/config.yaml par ce fichier

prometheus:
  url: "http://localhost:9090"
  timeout: 30
  verify_ssl: false

agent:
  name: "metrics-agent"
  check_interval: 20  # V√©rification toutes les 20 secondes
  lookback_window: 180  # 3 minutes de lookback
  
logging:
  level: "INFO"
  format: "text"
  file: "logs/metrics-agent.log"
  rotation: "100 MB"
  retention: "30 days"

orchestrator:
  endpoint: "http://localhost:8000/api/anomalies"
  timeout: 10
  retry_attempts: 3

# M√©triques custom du Pushgateway
metrics:
  # M√©trique normale (devrait rarement alerter)
  - name: "test_normal_metric"
    type: "gauge"
    labels: ["type"]
    
  # M√©trique avec spikes (va d√©tecter les pics)
  - name: "test_spike_metric"
    type: "gauge"
    labels: ["type"]
    
  # M√©trique d√©passant seuil
  - name: "test_threshold_metric"
    type: "gauge"
    labels: ["type"]
    
  # M√©trique avec pattern
  - name: "test_pattern_metric"
    type: "gauge"
    labels: ["type"]
    
  # Counter de requ√™tes
  - name: "test_requests_total"
    type: "counter"
    labels: ["status", "method"]

detectors:
  spike_detector:
    enabled: true
    sensitivity: 0.9
    min_change_percent: 100  # D√©tecte les doublements ou plus
    
  statistical_detector:
    enabled: true
    z_score_threshold: 2.0
    iqr_multiplier: 1.5
    
  threshold_detector:
    enabled: true
    
  pattern_detector:
    enabled: true
    window_size: 10

  # ü§ñ NOUVEAU: Validateur LLM (enrichit les anomalies avec intelligence)
  llm_validator:
    enabled: true
    keep_all_anomalies: true  # Si false, filtre les faux positifs (en d√©veloppement)